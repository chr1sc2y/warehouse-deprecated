# 工作两年总结

[TOC]

2019 年参加腾讯的暑期实习面试认识了现在的总监，那段时间退租了原有的公寓寄宿在同学家里，面试当天又刚参加完 GoogleCloudOnBoard 在回去的路上，整个面试的过程非常仓促，气喘吁吁地拿着手机跟面试官打了两小时微信语音，虽然后来计划有变并没有在假期回国实习，但也因此获得了之后校招被总监直接内推到现在项目组的机会。于是后来在经历了四轮技术面试之后，某天在图书馆突然接到总监的微信语音，接着又是 HR 的沟通电话，才在回国的几个月前确定了要来深圳的天美。

两年的时间里经历了很多工作和生活上的试错和反馈，发生了很多价值观和世界观上的改变，为了防止，在此记录下来。

## impact

刚上班的时候，你认为“工作”无非就是做好老板安排的事情，月底的时候老板为你在这个月完成工作所付出的时间支付等价的薪资。那么理所应当地，如果你每天花更多的时间在工作上，每天加班到晚上 10 点，周六周日不间断工作，为老板创造更多的收益，那么老板就会更乐意为你支付更高的薪资，这也是为什么国内会有那么多人乐此不疲地内卷的原因。

![1](https://raw.githubusercontent.com/ZintrulCre/warehouse/master/resources/experience/1.png)

实际上有些人虽然每天从不加班到点就走，但仍然能创造出很大的 impact，还能拿到高绩效和更多的奖金。用李开复的话来说，impact 就是世界有你和没有你之间的区别。举个例子，你女朋友很爱去图书馆自习室，需要每天晚上 9 点登录学校图书馆网站，预约第二天的自习室名额，如果你花几小时写个脚本放在服务器上每天定时自动抢名额，为她省下了每天那几分钟的时间和精力，那么（为她每天省下的时间和精力 * 天数）就是你写脚本这件事的 impact；同时你还可以顺带把脚本给你爱学习的朋友们用，那么这个数值还可以乘上使用的人数。套用李沐大神的定义，impact 等于（受益人数 * 人均时间 * 单位时间价值差），单位时间价值差取决于你对这件事完成的好坏，如果有人写了一个更易用，响应更快的新的脚本，你的朋友们都去用这个新脚本了，那么这个脚本开发者创造的单位时间价值差就比你高。

### 后台开发

后台开发无非两部分：增删改查和高并发架构，前者需要数据结构和算法的知识，后者需要系统设计的能力，包括缓存设计、云原生、异步存储、数据拆分之类的。而游戏后台相较于互联网还多出了有状态服务和延迟敏感两个特点，并且在系统设计方面也有很大的细分差异。

游戏后台习惯于先在内存上读写数据，再把有状态的内存数据持久化到 db，而不是每次都去操作 cache / db，这和现在的互联网后台架构的“业务逻辑和数据分离”的指导思想有很大的区别。

服务器上云依靠 service mesh 进行通信，sidecar 注入和劫持流量，拿到数据包之后还要考虑做零拷贝来降低单机延迟，经过这些步骤之后如果延迟是 100ms ，对互联网业务来说或许是可以接受的，但对手游来说已经几乎高到无法容忍了；除此之外把功能不同的模块拆分成微服务后，还会极大地增加不同模块间通信的网络开销。

游戏后台进行云上扩缩容还要考虑 k8s 资源调度的效率，有状态服务的迁移流程，迁移时要保证不可服务的时间和粒度尽量小。

不同的业务有各自的刚需和痛点，把这些互联网时代催生的技术应用到游戏业务上时也要结合其对产品的价值来进行相应的调整，而不是生搬硬套。

### 游戏行业

2021 年的未成年人保护法和版号停发让国内各家游戏公司都在推进所谓精品化和出海两个方案。

因为版号少了，游戏公司一方面要投入更多资源到长线运营，也就是氪金上来保证现金流，另一方面只能保守地复制成功经验（moba，卡牌，打枪）来抢存量市场保证新游戏不会没人玩。长此以往玩家逐渐审美疲劳，也就遏制了青少年玩家对于游戏的兴趣，有关部门也能逐步加大力度断绝国内游戏行业的前途，最后再将其连根拔起，从此没了教培和游戏，年轻人也就能专心谈恋爱，从而提高生育率，解决人口危机了。

至于出海，目前有资金和技术储备跟海外厂商直接竞争的国内游戏公司也就只有腾讯了，不过对有关部门来说，制裁一个公司可比监管整个行业简单多了。

![2](https://raw.githubusercontent.com/ZintrulCre/warehouse/master/resources/experience/2.png)

### 技术和产品

游戏后台最重视 n 个 9 的高可用，最害怕上线之后出现 bug。这两年里印象最深的外网 bug 有两次，一次是入职半年做 crud 时，因为没有仔细阅读文件里的多个名称相近的接口导致调用了错误的一个；另一次是某个元旦凌晨上线的功能，因为错误地估计了某个途径获取的数据条目数量导致预留的数组长度不够，后者在当时登陆高峰的时间段内造成了短暂的不可用。这些当然都不是因为技术水平不够，但确实会对个人口碑造成实实在在的打击。以前刷题或者竞赛时如果遇到这种小问题，最严重的后果无非是 ac 率降低和 5 分钟的罚时，但一旦转换到工作上，由于对技术审查的不严谨则会非常严重的影响产品和整个团队。

### 员工和公司

刚上班时会把公司当作学校，把工位当作图书馆或者实验室，手头没工作并且又没其他私事的时候，包括工作日晚上和周末，就喜欢在工位上看书学习。长此以往会牺牲不少个人生活的时间，同时也会让同事和经理都认为你是一个非常“卷”的人，从而影响对你工作态度和结果的评价，所以只要跟工作无关的活动一律不应在公司进行。

员工与公司之间的劳资关系也会影响工作效率。在互联网企业里劳资关系无非是简单的雇佣或合作关系，但腾讯的很多部门，尤其是在司庆到春节的一段时间里，喜欢以“家人们”来互相称呼，听到的时候会让我非常反感，这并不是健康的劳资关系。

刚入职的时候毛星云大神坐在离我不到 10 米的地方，经常和客户端开发的同事们有说有笑，或是讨论技术。他出事之后办公室里的几百号人却像无事发生过一样，大都自顾自地重复着前一天的动作，不免让人感到一丝凄凉。大二的时候要不是偶然间搜到浅墨在 CSDN 上的 DX 教程，可能我的计算机图形学也就挂了。引用 Youtuber [Vincent Chan](https://www.youtube.com/c/Vincentc) 的一段想法：

```
One day he stopped showing up. I thought he was just on vacation, but then a week went by, a month went by, and there's still nothing. I have no idea what happened. He could quit, he could have been fired. What was weird was that nothing changed, everything was exactly the same. People went to the office, people left the office. It was as if he never existed within these walls ever. I knew in the back of my head that a company is not going to stop running just because someone isn't there anymore but I felt really weird to witness this firsthand that someone that you've seen every day just disappeared and nothing changed. We are all replaceable, every single one of us. You're really only as good as the hours of life that you can give to the company. Once you can't give them any more hours, they'll find someone else who can.
```

## 生活

在深圳谈生活确实是件挺滑稽的事，这里的人从不像上海人一样讨论茂悦大酒店楼上酒吧看到的陆家嘴夕阳和夜景，或是约着周末去乍浦路桥的机位拍片。2020 年时大家只会讨论股票、基金、房地产，现在几乎已经闭口不谈了，大多只关心本地和香港的疫情，以及比以往更冷的寒冬。

### 房价

深圳的房产均价是高于北京和上海的，在目前看来大部分深圳人仍然无法通过不吃不喝 30 年来购置一套房产，但随着棚改货币化跟涨价去库存的结束和货币政策的转向，房产这种长线期货的价格也已经过了本轮经济周期的顶峰，不过政府当然不会放任这个对国内经济起决定性带动作用的市场崩盘从而引发金融危机，所以一定会持续通过行政手段，例如限购、限贷、房产税等来尝试消化泡沫，不过这种尝试就连美国和日本都没能成功，只能祝愿我们的国家政府能够实现吧。

